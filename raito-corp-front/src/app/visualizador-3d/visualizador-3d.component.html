<div class="visualizador-container">
  <!-- Header -->
  <header class="app-header">
    <div class="header-left">
      <div class="logo">RaitÃµ Corp</div>
      <h1 class="page-title">Visualizador 3D</h1>
    </div>
    <div class="header-right">
      <button class="btn-customize" (click)="toggleCustomizationPanel()">
        Customize this space
      </button>
      <button class="btn-back" (click)="goBack()" title="Voltar">
        â† Voltar
      </button>
    </div>
  </header>

  <!-- Main Layout - 2 Colunas -->
  <div class="main-layout">

    <!-- Coluna Esquerda - Seletor de Ambientes -->
    <aside class="sidebar-left" [class.collapsed]="isCustomizing">
      <div class="sidebar-header">
        <button class="btn-create-space">Create space</button>
        <button class="btn-my-spaces">
          <span class="icon">ğŸ“</span>
          My spaces
        </button>
      </div>

      <div class="divider"></div>

      <!-- Grid de Ambientes PrÃ©-definidos -->
      <div class="environments-grid">
        <h3 class="section-title">Ambientes PrÃ©-definidos</h3>

        <div class="environment-cards">
          <div
            *ngFor="let env of allEnvironments"
            class="environment-card"
            [class.active]="selectedEnvironment === env.id"
            (click)="selectEnvironment(env.id)"
          >
            <div class="card-image">
              <img [src]="env.previewImage || 'assets/placeholder-room.jpg'" [alt]="env.name">
            </div>
            <div class="card-content">
              <div class="card-radio">
                <input
                  type="radio"
                  [id]="'env-' + env.id"
                  [name]="'environment'"
                  [checked]="selectedEnvironment === env.id"
                  (change)="selectEnvironment(env.id)"
                >
              </div>
              <label [for]="'env-' + env.id" class="card-label">{{ env.name }}</label>
            </div>
          </div>
        </div>
      </div>

      <div class="sidebar-footer">
        <button class="btn-customize-footer" (click)="toggleCustomizationPanel()">
          Customize space
        </button>
      </div>
    </aside>

    <!-- Coluna Direita - Visualizador 3D + Painel de CustomizaÃ§Ã£o -->
    <main class="content-right">

      <!-- Ãrea do Visualizador 3D -->
      <div class="viewport-3d">
        <canvas
          #renderCanvas
          class="renderCanvas"
          (window:resize)="onWindowResize($event)"
        ></canvas>

        <!-- Loading Screen -->
        <div class="loading-overlay" *ngIf="isLoading">
          <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Carregando ambiente 3D...</p>
          </div>
        </div>

        <!-- InstruÃ§Ãµes de Controle -->
        <div class="viewport-instructions" *ngIf="!isLoading">
          <p>Arraste para rotacionar â€¢ Scroll para zoom</p>
        </div>

        <!-- Ferramentas 3D (overlay) -->
        <div class="viewport-tools">
          <button class="tool-btn" (click)="resetCamera()" title="Reset CÃ¢mera">
            ğŸ”„
          </button>
          <button class="tool-btn" (click)="toggleLights()" title="Desligar Luz">
            ğŸ’¡
          </button>
        </div>
      </div>

      <!-- Painel de CustomizaÃ§Ã£o de IluminaÃ§Ã£o -->
      <aside class="customization-panel" [class.visible]="isCustomizing">
        <div class="panel-header">
          <h2 class="panel-title">Customize this space</h2>
          <button class="btn-close-panel" (click)="toggleCustomizationPanel()">âœ•</button>
        </div>

        <div class="panel-content">

          <!-- Grupo 1: Tipo de IluminaÃ§Ã£o -->
          <div class="control-group">
            <label class="control-label">Tipo de IluminaÃ§Ã£o</label>
            <div class="lamp-types">
              <button
                *ngFor="let type of lampTypes"
                class="lamp-type-btn"
                [class.active]="selectedLampType === type.id"
                (click)="selectLampType(type.id)"
              >
                {{ type.name }}
              </button>
            </div>
          </div>

          <!-- Grupo 2: Intensidade da Luz -->
          <div class="control-group">
            <label class="control-label">Intensidade da Luz</label>
            <div class="slider-control">
              <input
                type="range"
                min="0"
                max="100"
                [(ngModel)]="lightIntensity"
                (input)="updateLightIntensity($event)"
                class="slider"
              >
              <span class="slider-value">{{ lightIntensity }}%</span>
            </div>
          </div>

        </div>
      </aside>

    </main>

  </div>
</div>
