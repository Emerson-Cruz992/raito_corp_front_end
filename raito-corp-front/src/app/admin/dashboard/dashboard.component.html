<div class="dashboard">
  <div class="dashboard-header">
    <h2>Dashboard</h2>
  </div>

  <div class="metrics-grid">
    <div class="metric-card">
      <div class="metric-icon dollar">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
        </svg>
      </div>
      <div class="metric-content">
        <h3>Receita Total</h3>
        <p class="metric-value">{{ formatCurrency(metrics.receitaTotal) }}</p>
        <p class="metric-change positive">+{{metrics.receitaCrescimento}}% vs mês anterior</p>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon products">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/>
        </svg>
      </div>
      <div class="metric-content">
        <h3>Produtos Vendidos</h3>
        <p class="metric-value">{{metrics.produtosVendidos}}</p>
        <p class="metric-change positive">+{{metrics.vendidosCrescimento}}% vs mês anterior</p>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon orders">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
        </svg>
      </div>
      <div class="metric-content">
        <h3>Total de Pedidos</h3>
        <p class="metric-value">{{metrics.totalPedidos}}</p>
        <p class="metric-info warning">{{metrics.pedidosPendentes}} pendentes</p>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon alert">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
        </svg>
      </div>
      <div class="metric-content">
        <h3>Alertas de Estoque</h3>
        <p class="metric-value">{{metrics.alertasEstoque}}</p>
        <p class="metric-info danger">{{metrics.alertasRequerAtencao}} Requer atenção</p>
      </div>
    </div>
  </div>

  <div class="charts-grid">
    <div class="chart-card">
      <h3>Vendas por Mês</h3>
      <p class="chart-subtitle">Receita nos últimos meses</p>
      <div class="bar-chart">
        <div class="chart-bars">
          <div class="bar-group" *ngFor="let sale of salesByMonth">
            <div class="bar" [style.height.px]="getSalesBarHeight(sale.receita)">
              <span class="bar-value">{{formatCurrency(sale.receita)}}</span>
            </div>
            <span class="bar-label">{{sale.mes}}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="chart-card">
      <h3>Vendas por Categoria</h3>
      <p class="chart-subtitle">Distribuição percentual</p>
      <div class="pie-chart">
        <svg viewBox="0 0 200 200">
          <circle *ngFor="let segment of getPieSegments(); let i = index"
            cx="100" cy="100" r="70"
            fill="none"
            [attr.stroke]="segment.color"
            stroke-width="70"
            [attr.stroke-dasharray]="segment.dasharray"
            [attr.transform]="'rotate(' + (segment.rotation - 90) + ' 100 100)'"/>
        </svg>
        <div class="pie-labels">
          <div class="pie-label" *ngFor="let cat of categorySales; let i = index">
            <span class="label-marker" [style.background]="getCategoryColor(i)"></span>
            <span class="label-text">{{cat.categoria}}: {{cat.percentual}}%</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="top-products">
    <h3>Produtos Mais Vendidos</h3>
    <p class="section-subtitle">Top 5 produtos por receita gerada</p>
    <div class="products-table">
      <div class="table-header">
        <span>Produto</span>
        <span>Categoria</span>
        <span>Vendidos</span>
        <span>Receita</span>
      </div>
      <div class="table-row" *ngFor="let product of topProducts">
        <span class="product-name">{{product.nome}}</span>
        <span class="product-category">{{product.categoria}}</span>
        <span class="product-sold">{{product.vendidos}}</span>
        <span class="product-revenue">{{formatCurrency(product.receita)}}</span>
      </div>
    </div>
  </div>
</div>
